<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>관리자</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 24px; }
    input, textarea, button, select { padding: 8px 10px; margin: 6px 0; }
    button { cursor: pointer; }
    table { width: 100%; max-width: 980px; border-collapse: collapse; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: left; vertical-align: top; }
    th { background: #f6f6f6; }
    .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .muted { color:#666; font-size: 13px; }
    .danger { background:#ef4444; color:#fff; border:0; padding:8px 10px; border-radius:8px; }
    .btn { border:1px solid #ddd; border-radius:8px; background:#fff; }
    .thumb { width: 90px; height: 56px; object-fit: cover; border-radius: 10px; border:1px solid #eee; background:#f3f4f6; }
    hr { margin: 18px 0; border: 0; border-top: 1px solid #eee; }
    code { background:#f3f4f6; padding:2px 6px; border-radius:6px; }
  </style>
</head>

<body>
  <h1>관리자 로그인</h1>

  <div id="loginBox">
    <input id="email" placeholder="email" />
    <br/>
    <input id="password" type="password" placeholder="password" />
    <br/>
    <button class="btn" id="btnLogin">로그인</button>
    <p id="loginMsg"></p>
  </div>

  <div id="writeBox" style="display:none;">
    <hr />

    <h2>글 작성</h2>

    <div class="row">
      <span class="muted">카테고리:</span>
      <select id="category" class="btn">
        <option value="case" selected>case (현장사례)</option>
        <option value="notice">notice (공지)</option>
        <option value="guide">guide (가이드)</option>
      </select>
    </div>

    <input id="title" placeholder="제목" style="width:min(820px,100%);" />
    <br/>

    <div class="row" style="align-items:flex-start;">
      <div>
        <div class="muted">대표 이미지(선택)</div>
        <input id="imageFile" type="file" accept="image/*" />
      </div>
      <div>
        <div class="muted">대표 이미지 미리보기</div>
        <img id="preview" class="thumb" alt="" style="display:none;" />
      </div>
    </div>

    <hr/>

    <h3 style="margin:0 0 8px;">본문 이미지 여러 장 추가</h3>
    <div class="row" style="align-items:flex-start;">
      <div>
        <input id="bodyImages" type="file" accept="image/*" multiple />
        <br/>
        <button class="btn" id="btnInsertImages" type="button">본문에 이미지 삽입</button>
        <p class="muted" id="imgMsg"></p>
        <p class="muted" style="max-width:820px;">
          ✅ 사진 여러 장 선택 후 버튼을 누르면, 본문(content)에
          <code>&lt;img src="..."&gt;</code> 가 자동으로 들어가요. (원하면 바로 캡션도 적을 수 있게 <code>&lt;p class="cap"&gt;</code>도 같이 넣어줌)
        </p>
      </div>
    </div>

    <div class="muted" style="margin-top:6px;">
      본문은 <b>HTML</b>로 저장돼요. 예: <code>&lt;h2&gt;</code>, <code>&lt;p&gt;</code>, <code>&lt;img&gt;</code> 사용 가능
    </div>

    <textarea id="content" placeholder="내용(HTML 가능)" rows="12" style="width:min(820px,100%);"></textarea>

    <br/>
    <button class="btn" id="btnSave">저장</button>
    <button class="btn" id="btnLogout">로그아웃</button>
    <p id="writeMsg"></p>

    <hr/>

    <h2>작성한 글 목록</h2>
    <p class="muted">제목 클릭: 미리보기 / 삭제: Firestore에서 완전 삭제</p>

    <table>
      <thead>
        <tr>
          <th style="width:12%;">이미지</th>
          <th style="width:43%;">제목</th>
          <th style="width:12%;">카테고리</th>
          <th style="width:18%;">등록일</th>
          <th style="width:5%;">조회</th>
          <th style="width:10%;">관리</th>
        </tr>
      </thead>
      <tbody id="adminList"></tbody>
    </table>
  </div>

  <script type="module" src="js/admin.js"></script>
</body>
</html>
